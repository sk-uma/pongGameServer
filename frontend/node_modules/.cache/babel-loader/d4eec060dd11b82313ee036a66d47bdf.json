{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useCallback } from \"react\";\nimport axios from \"axios\";\n\nconst getToken = code => axios.post(\"https://api.intra.42.fr/oauth/token\", {\n  grant_type: \"authorization_code\",\n  client_id: \"5ec7a9808358afbd8a4a174c7d89d4ae27fc87b35477bf1065cc11387df68549\",\n  client_secret: \"811b6f2ae3b9ccb0fb01fe47113e2189280f6daa0a4ecadf082d3c1cd96670d6\",\n  code: code,\n  redirect_uri: \"http://localhost:3000/home\"\n});\n\nconst getMe = accessToken => axios.get(\"https://api.intra.42.fr/v2/me\", {\n  headers: {\n    Authorization: `Bearer ${accessToken}`\n  }\n});\n\nexport const use42User = () => {\n  _s();\n\n  const [FtUser, setFtUser] = useState(null);\n  const getFtUser = useCallback(code => {\n    //\t\taxios\n    //\t\t\t.post(\"https://api.intra.42.fr/oauth/token\", {\n    //\t\t\t\tgrant_type: \"authorization_code\",\n    //\t\t\t\tclient_id:\n    //\t\t\t\t\t\"5ec7a9808358afbd8a4a174c7d89d4ae27fc87b35477bf1065cc11387df68549\",\n    //\t\t\t\tclient_secret:\n    //\t\t\t\t\t\"811b6f2ae3b9ccb0fb01fe47113e2189280f6daa0a4ecadf082d3c1cd96670d6\",\n    //\t\t\t\tcode: code,\n    //\t\t\t\tredirect_uri: \"http://localhost:3000/home\",\n    //\t\t\t})\n    getToken(code).then(tokenRes => {\n      getMe(tokenRes.data.access_token) //\t\t\t\taxios\n      //\t\t\t\t\t.get(\"https://api.intra.42.fr/v2/me\", {\n      //\t\t\t\t\t\theaders: {\n      //\t\t\t\t\t\t\tAuthorization: `Bearer ${accessToken.data.access_token}`,\n      //\t\t\t\t\t\t},\n      //\t\t\t\t\t})\n      .then(res => {\n        setFtUser({\n          imgUrl: res.data.image_url,\n          name: res.data.login\n        });\n      }).catch(() => console.log(\"Not Found Me\"));\n    }).catch(() => console.log(\"Not Found AccessToken\"));\n  }, []);\n  return {\n    getFtUser,\n    FtUser\n  };\n};\n\n_s(use42User, \"obQosPP3OzoRObG0wSTBvmxo/kY=\");","map":{"version":3,"sources":["/Users/r_tomishi/Desktop/42Tokyo/ft_transcendence/LocalDevelopment/frondend/src/hooks/use42User.ts"],"names":["useState","useCallback","axios","getToken","code","post","grant_type","client_id","client_secret","redirect_uri","getMe","accessToken","get","headers","Authorization","use42User","FtUser","setFtUser","getFtUser","then","tokenRes","data","access_token","res","imgUrl","image_url","name","login","catch","console","log"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,WAAnB,QAAsC,OAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,QAAQ,GAAIC,IAAD,IAChBF,KAAK,CAACG,IAAN,CAAW,qCAAX,EAAkD;AACjDC,EAAAA,UAAU,EAAE,oBADqC;AAEjDC,EAAAA,SAAS,EACR,kEAHgD;AAIjDC,EAAAA,aAAa,EACZ,kEALgD;AAMjDJ,EAAAA,IAAI,EAAEA,IAN2C;AAOjDK,EAAAA,YAAY,EAAE;AAPmC,CAAlD,CADD;;AAWA,MAAMC,KAAK,GAAIC,WAAD,IACbT,KAAK,CAACU,GAAN,CAAU,+BAAV,EAA2C;AAC1CC,EAAAA,OAAO,EAAE;AACRC,IAAAA,aAAa,EAAG,UAASH,WAAY;AAD7B;AADiC,CAA3C,CADD;;AAOA,OAAO,MAAMI,SAAS,GAAG,MAAM;AAAA;;AAC9B,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBjB,QAAQ,CAAgB,IAAhB,CAApC;AAEA,QAAMkB,SAAS,GAAGjB,WAAW,CAAEG,IAAD,IAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAD,IAAAA,QAAQ,CAACC,IAAD,CAAR,CACEe,IADF,CACQC,QAAD,IAAc;AACnBV,MAAAA,KAAK,CAACU,QAAQ,CAACC,IAAT,CAAcC,YAAf,CAAL,CACC;AACA;AACA;AACA;AACA;AACA;AAND,OAOEH,IAPF,CAOQI,GAAD,IAAS;AACdN,QAAAA,SAAS,CAAC;AACTO,UAAAA,MAAM,EAAED,GAAG,CAACF,IAAJ,CAASI,SADR;AAETC,UAAAA,IAAI,EAAEH,GAAG,CAACF,IAAJ,CAASM;AAFN,SAAD,CAAT;AAIA,OAZF,EAaEC,KAbF,CAaQ,MAAMC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAbd;AAcA,KAhBF,EAiBEF,KAjBF,CAiBQ,MAAMC,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAjBd;AAkBA,GA7B4B,EA6B1B,EA7B0B,CAA7B;AA8BA,SAAO;AAAEZ,IAAAA,SAAF;AAAaF,IAAAA;AAAb,GAAP;AACA,CAlCM;;GAAMD,S","sourcesContent":["import { useState, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { FtUser } from \"../types/api/FtUser\";\n\nconst getToken = (code: string) =>\n\taxios.post(\"https://api.intra.42.fr/oauth/token\", {\n\t\tgrant_type: \"authorization_code\",\n\t\tclient_id:\n\t\t\t\"5ec7a9808358afbd8a4a174c7d89d4ae27fc87b35477bf1065cc11387df68549\",\n\t\tclient_secret:\n\t\t\t\"811b6f2ae3b9ccb0fb01fe47113e2189280f6daa0a4ecadf082d3c1cd96670d6\",\n\t\tcode: code,\n\t\tredirect_uri: \"http://localhost:3000/home\",\n\t});\n\nconst getMe = (accessToken: string) =>\n\taxios.get(\"https://api.intra.42.fr/v2/me\", {\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${accessToken}`,\n\t\t},\n\t});\n\nexport const use42User = () => {\n\tconst [FtUser, setFtUser] = useState<FtUser | null>(null);\n\n\tconst getFtUser = useCallback((code: string) => {\n\t\t//\t\taxios\n\t\t//\t\t\t.post(\"https://api.intra.42.fr/oauth/token\", {\n\t\t//\t\t\t\tgrant_type: \"authorization_code\",\n\t\t//\t\t\t\tclient_id:\n\t\t//\t\t\t\t\t\"5ec7a9808358afbd8a4a174c7d89d4ae27fc87b35477bf1065cc11387df68549\",\n\t\t//\t\t\t\tclient_secret:\n\t\t//\t\t\t\t\t\"811b6f2ae3b9ccb0fb01fe47113e2189280f6daa0a4ecadf082d3c1cd96670d6\",\n\t\t//\t\t\t\tcode: code,\n\t\t//\t\t\t\tredirect_uri: \"http://localhost:3000/home\",\n\t\t//\t\t\t})\n\t\tgetToken(code)\n\t\t\t.then((tokenRes) => {\n\t\t\t\tgetMe(tokenRes.data.access_token)\n\t\t\t\t\t//\t\t\t\taxios\n\t\t\t\t\t//\t\t\t\t\t.get(\"https://api.intra.42.fr/v2/me\", {\n\t\t\t\t\t//\t\t\t\t\t\theaders: {\n\t\t\t\t\t//\t\t\t\t\t\t\tAuthorization: `Bearer ${accessToken.data.access_token}`,\n\t\t\t\t\t//\t\t\t\t\t\t},\n\t\t\t\t\t//\t\t\t\t\t})\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tsetFtUser({\n\t\t\t\t\t\t\timgUrl: res.data.image_url,\n\t\t\t\t\t\t\tname: res.data.login,\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => console.log(\"Not Found Me\"));\n\t\t\t})\n\t\t\t.catch(() => console.log(\"Not Found AccessToken\"));\n\t}, []);\n\treturn { getFtUser, FtUser };\n};\n"]},"metadata":{},"sourceType":"module"}